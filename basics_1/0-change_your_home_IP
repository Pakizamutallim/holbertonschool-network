#!/usr/bin/env bash
# This script modifies the /etc/hosts file to change localhost IP

# Ensure the script is run as root
if [ "$(id -u)" -ne 0 ]; then
    echo "Please run as root"
    exit 1
fi 

# Backup the original /etc/hosts file
cp /etc/hosts /etc/hosts.backup

# Use a temporary file to avoid sed issues
temp_file=$(mktemp)

# Update the /etc/hosts file
grep -v '127.0.0.1\s\+localhost' /etc/hosts > "$temp_file"
echo "127.0.0.2 localhost" >> "$temp_file"
grep -v 'facebook.com' "$temp_file" > "$temp_file"
echo "8.8.8.8 facebook.com" >> "$temp_file"

# Move the updated temp file to /etc/hosts
mv "$temp_file" /etc/hosts

echo "Hosts file updated successfully."
